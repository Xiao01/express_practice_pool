<%- include("./header.ejs") %>



<div class="row">
  <div class="col-lg-12">
    <% if(data.length>0){ %>
    <div class="page-header">
      <h1 id="tables"><%= title %></h1>
    </div>

    <div class="bs-component">
      <table class="table table-hover">
        <thead>
          <tr>
            <th scope="col">ID</th>
            <th scope="col">文章标题</th>
            <th scope="col">文章类型</th>
            <th scope="col">发布作者</th>
            <th scope="col">发布时间</th>
            <th scope="col">删除操作</th>
          </tr>
        </thead>
        <tbody>
          <% data.forEach(function(item,index) { %>

          <tr>
            <th scope="row">
              <a class="nav-link" href="/article_info?_id=<%=item._id%>">
                <%= 1+index %>
              </a>
            </th>
            <td>
              <a class="nav-link" href="/article_info?title=<%=item.title%>">
                <%= item.title%>
              </a>
            </td>
            <td><div class="nav-link">
              <% var types =  item.type
               for (var _type of types ){ %>
              <a  href="/articles?type=<%=_type%>">
                <%=_type%>
              </a>
              <%}%></div>
            </td>
            <td>
              <a class="nav-link" href="/articles?author=<%=item.author%>">
                <%= item.author%>
              </a>
            </td>
            <td>
              <a class="nav-link" href="/article_info?datetime=<%=item.datetime%>">
                <%= item.last_datetime%>
              </a>
            <td>
              <a class="nav-link" href="/article_info_delete?title=<%=item.title%>">
                删除
              </a>
            </td>
          </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
    <%}else{ %>
    <div class="page-header">
      <h1 id="tables">暂无发布的文章</h1>
    </div>

    <% }  %>
  </div>
</div>


<%- include("./footer.ejs") %>